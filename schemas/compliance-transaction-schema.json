{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Treasury Compliance Transaction Record",
  "description": "JSON schema for compliance transaction data structure for Circle Gateway and Arc transparency integration",
  "type": "object",
  "required": [
    "transactionHash",
    "internalTxHash",
    "ruleId",
    "source",
    "recipient",
    "usdcAmount",
    "kycStatus",
    "amlStatus",
    "timestamp",
    "blockNumber",
    "executor"
  ],
  "properties": {
    "recordId": {
      "type": "string",
      "description": "Unique compliance record identifier (bytes32 hex string)",
      "pattern": "^0x[0-9a-fA-F]{64}$",
      "example": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"
    },
    "transactionHash": {
      "type": "string",
      "description": "On-chain transaction hash from the blockchain",
      "pattern": "^0x[0-9a-fA-F]{64}$",
      "example": "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
    },
    "internalTxHash": {
      "type": "string",
      "description": "Internal transaction identifier within the Treasury contract",
      "pattern": "^0x[0-9a-fA-F]{64}$",
      "example": "0x9876543210fedcba9876543210fedcba9876543210fedcba9876543210fedcba"
    },
    "ruleId": {
      "type": "integer",
      "description": "Rule ID that triggered the transaction (0 for manual transactions)",
      "minimum": 0,
      "example": 42
    },
    "source": {
      "type": "string",
      "description": "Source of the transaction",
      "enum": [
        "MULTISIG_TRANSACTION",
        "SCHEDULED_DISTRIBUTION",
        "ALLOCATION_RULE",
        "DISTRIBUTION_RULE"
      ],
      "example": "ALLOCATION_RULE"
    },
    "recipient": {
      "type": "string",
      "description": "Recipient wallet address (Ethereum address)",
      "pattern": "^0x[0-9a-fA-F]{40}$",
      "example": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"
    },
    "usdcAmount": {
      "type": "string",
      "description": "USDC amount transferred (6 decimals, as string to preserve precision)",
      "pattern": "^[0-9]+$",
      "example": "1000000000"
    },
    "usdcAmountFormatted": {
      "type": "number",
      "description": "USDC amount in human-readable format (6 decimals)",
      "example": 1000.0
    },
    "kycStatus": {
      "type": "string",
      "description": "KYC (Know Your Customer) verification status",
      "enum": [
        "PENDING",
        "VERIFIED",
        "REJECTED",
        "EXEMPT",
        "UNKNOWN"
      ],
      "example": "VERIFIED"
    },
    "amlStatus": {
      "type": "string",
      "description": "AML (Anti-Money Laundering) screening status",
      "enum": [
        "PENDING",
        "VERIFIED",
        "REJECTED",
        "EXEMPT",
        "UNKNOWN"
      ],
      "example": "VERIFIED"
    },
    "timestamp": {
      "type": "integer",
      "description": "Unix timestamp of the transaction (seconds since epoch)",
      "minimum": 0,
      "example": 1704067200
    },
    "timestampISO": {
      "type": "string",
      "description": "ISO 8601 formatted timestamp for human readability",
      "format": "date-time",
      "example": "2024-01-01T00:00:00Z"
    },
    "blockNumber": {
      "type": "integer",
      "description": "Block number in which the transaction was executed",
      "minimum": 0,
      "example": 12345678
    },
    "executor": {
      "type": "string",
      "description": "Address that executed the transaction",
      "pattern": "^0x[0-9a-fA-F]{40}$",
      "example": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"
    },
    "circleGatewayTxId": {
      "type": "string",
      "description": "Circle Gateway transaction identifier (if integrated)",
      "example": "cg_tx_1234567890abcdef"
    },
    "arcTransparencyId": {
      "type": "string",
      "description": "Arc network transparency identifier for opt-in transparency",
      "example": "arc_tx_abcdef1234567890"
    },
    "reconciled": {
      "type": "boolean",
      "description": "Whether the transaction has been reconciled for reporting",
      "example": false
    },
    "reconciledAt": {
      "type": "integer",
      "description": "Unix timestamp when the record was reconciled (0 if not reconciled)",
      "minimum": 0,
      "example": 0
    },
    "reconciledAtISO": {
      "type": "string",
      "description": "ISO 8601 formatted reconciliation timestamp",
      "format": "date-time",
      "example": null
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata for regulatory reporting",
      "properties": {
        "jurisdiction": {
          "type": "string",
          "description": "Jurisdiction code (ISO 3166-1 alpha-2)",
          "pattern": "^[A-Z]{2}$",
          "example": "US"
        },
        "regulatoryCategory": {
          "type": "string",
          "description": "Regulatory category of the transaction",
          "example": "PAYROLL"
        },
        "reportingPeriod": {
          "type": "string",
          "description": "Reporting period identifier",
          "example": "2024-Q1"
        },
        "notes": {
          "type": "string",
          "description": "Additional notes for compliance officers",
          "example": "Monthly payroll distribution"
        }
      }
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "recordId": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
      "transactionHash": "0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
      "internalTxHash": "0x9876543210fedcba9876543210fedcba9876543210fedcba9876543210fedcba",
      "ruleId": 42,
      "source": "ALLOCATION_RULE",
      "recipient": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",
      "usdcAmount": "1000000000",
      "usdcAmountFormatted": 1000.0,
      "kycStatus": "VERIFIED",
      "amlStatus": "VERIFIED",
      "timestamp": 1704067200,
      "timestampISO": "2024-01-01T00:00:00Z",
      "blockNumber": 12345678,
      "executor": "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb",
      "circleGatewayTxId": "cg_tx_1234567890abcdef",
      "arcTransparencyId": "arc_tx_abcdef1234567890",
      "reconciled": false,
      "reconciledAt": 0,
      "reconciledAtISO": null,
      "metadata": {
        "jurisdiction": "US",
        "regulatoryCategory": "PAYROLL",
        "reportingPeriod": "2024-Q1",
        "notes": "Monthly payroll distribution"
      }
    }
  ]
}

